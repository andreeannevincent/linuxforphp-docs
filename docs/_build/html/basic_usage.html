
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Basic Usage &#8212; Linux for PHP 8.1.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Advanced Features" href="advanced_features.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="advanced_features.html" title="Advanced Features"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Linux for PHP 8.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="basic-usage">
<span id="basicusageanchor"></span><h1>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h1>
<p>Once Docker is installed, you can now run a <em>Linux for PHP</em> container. It is possible to run the container in
Docker’s interactive or detached modes.</p>
<div class="section" id="docker-s-interactive-mode">
<span id="index-0"></span><h2>Docker’s Interactive Mode<a class="headerlink" href="#docker-s-interactive-mode" title="Permalink to this headline">¶</a></h2>
<p>To run a <em>Linux for PHP</em> container in interactive mode, with the non thread-safe version of PHP 7.2.5, please
enter the following command using your system’s shell (BASH/PowerShell):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --rm -it asclinux/linuxforphp-8.1:7.2.5-nts /bin/bash
</pre></div>
</div>
<p>You will then get a command-line interface similar to this one :</p>
<img alt="_images/basic_usage01.png" src="_images/basic_usage01.png" />
<p>Once you are done with the container, please quit the container by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ exit
</pre></div>
</div>
</div>
<div class="section" id="docker-s-detached-mode">
<span id="index-1"></span><h2>Docker’s Detached Mode<a class="headerlink" href="#docker-s-detached-mode" title="Permalink to this headline">¶</a></h2>
<p>And, what if you wish to run a PHP application from a Web browser and start the Linux for PHP container in
Docker’s detached mode? To do so, enter the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Change to your project&#39;s working directory
$ cd /my/project/folder
$ docker run -dit --restart=always \
-v ${PWD}/:/srv/www \``
-p 8181:80 \
-p 10443:443 \
asclinux/linuxforphp-8.1:7.2.5-nts \
lfphp
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This last command uses the “lfphp” script to start all available services inside the container. For more details, please see <a class="reference internal" href="advanced_features.html#lfphp-services"><span class="std std-ref">Automating Services in Linux for PHP</span></a></p>
</div>
<p>You should now be able to access any of the PHP scripts contained in your project folder by pointing your browser to <a class="reference external" href="http://localhost:8181/">http://localhost:8181/</a>.</p>
<p>Once you are done with the container, you can stop and remove it as you would any other Docker container running in detached mode:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker stop [container_id_here]
$ docker rm [container_id_here]
</pre></div>
</div>
</div>
<div class="section" id="pre-compiled-php-binaries">
<span id="index-2"></span><h2>Pre-compiled PHP binaries<a class="headerlink" href="#pre-compiled-php-binaries" title="Permalink to this headline">¶</a></h2>
<p>As metioned previously, it is possible to run <em>Linux for PHP</em> containers that come with pre-compiled binary versions of
any of the major versions of PHP. To obtain a list of the available binaries, please visit the project’s download page:</p>
<p><a class="reference external" href="https://linuxforphp.net/download">https://linuxforphp.net/download</a></p>
<span class="target" id="index-3"></span></div>
<div class="section" id="compiling-php-from-source">
<span id="lfphp-compile"></span><span id="index-4"></span><h2>Compiling PHP from source<a class="headerlink" href="#compiling-php-from-source" title="Permalink to this headline">¶</a></h2>
<p>Of course, <em>Linux for PHP</em> is a lightweight version of Linux with all the software needed to easily compile any recent
version of PHP. Thus, if you prefer to compile and use a different version of PHP, you can do so by entering the
following command in a new terminal window. Please make sure to enter the version that you wish to compile, as per the
following example (7.3.0dev in this case):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run -dit -p 8181:80 asclinux/linuxforphp-8.1:src /bin/bash -c &quot;lfphp-compile 7.2.10 nts&quot;
</pre></div>
</div>
<p>After a few minutes, the new PHP binaries will be compiled and ready to be used! You can always check on the
compilation’s progress by connecting to the container using the ‘docker exec’ command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker exec -it [id_of_the_container] /bin/bash
</pre></div>
</div>
<p>On the container’s CLI, enter the ‘top’ command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ top
</pre></div>
</div>
<p>To return to the command line, press <code class="docutils literal notranslate"><span class="pre">Q</span></code>.</p>
</div>
<div class="section" id="manually-compiling-php-from-source">
<span id="index-5"></span><h2>Manually compiling PHP from source<a class="headerlink" href="#manually-compiling-php-from-source" title="Permalink to this headline">¶</a></h2>
<p>Alternatively, you could also decide to do it manually. If so, start by running a Linux for PHP base image containing
the PHP source files with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker run --rm -it asclinux/linuxforphp-8.1:src /bin/bash
</pre></div>
</div>
<p>And, on the container’s command line interface (CLI), checkout the version of PHP you wish to compile and begin
compilation by entering the following commands (in our example, we will compile from master):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /root/php-src
$ git fetch --all --tags
$ git pull origin master
$ ./buildconf --force
$ ./configure --prefix=/usr \
--sysconfdir=/etc \
--localstatedir=/var \
--datadir=/usr/share/php \
--mandir=/usr/share/man \
--enable-fpm \
--with-fpm-user=apache \
--with-fpm-group=apache \
--with-config-file-path=/etc \
--with-zlib \
--enable-bcmath \
--with-bz2 \
--enable-calendar \
--enable-dba=shared \
--with-gdbm \
--with-gmp \
--enable-ftp \
--with-gettext=/usr \
--enable-mbstring \
--with-readline \
--with-mysql-sock=/run/mysqld/mysqld.sock \
--with-curl \
--with-openssl \
--with-openssl-dir=/usr \
--with-mhash \
--enable-intl \
--with-sodium=/usr \
--with-libxml-dir=/usr \
--with-libdir=/lib64 \
--enable-sockets \
--enable-libxml \
--enable-soap \
--with-gd \
--with-jpeg-dir=/usr \
--with-png-dir=/usr \
--with-zlib-dir=/usr \
--with-freetype-dir=/usr \
--enable-exif \
--with-xsl \
--with-xmlrpc \
--with-pgsql \
--with-pdo-mysql=/usr \
--with-pdo-pgsql \
--with-mysqli \
--with-ldap \
--with-ldap-sasl \
--enable-opcache
$ make
$ make test
$ make install
$ install -v -m644 php.ini-production /etc/php.ini
$ mv -v /etc/php-fpm.conf{.default,}
$ cp -v /etc/php-fpm.d/www.conf.default /etc/php-fpm.d/www.conf
$ sed -i &#39;s@php/includes&quot;@&amp;\ninclude_path = &quot;.:/usr/lib/php&quot;@&#39; /etc/php.ini
$ sed -i -e &#39;/proxy_module/s/^#//&#39; -e &#39;/proxy_fcgi_module/s/^#//&#39; /etc/httpd/httpd.conf
$ echo &#39;ProxyPassMatch ^/(.*.php)$ fcgi://127.0.0.1:9000/srv/www/$1&#39; &gt;&gt; /etc/httpd/httpd.conf
$ sed -i &#39;s/DirectoryIndex index.html/DirectoryIndex index.php index.html/&#39; /etc/httpd/httpd.conf
$ /etc/init.d/mysql start
$ /usr/sbin/php-fpm &amp;
$ /etc/init.d/httpd start
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Basic Usage</a><ul>
<li><a class="reference internal" href="#docker-s-interactive-mode">Docker’s Interactive Mode</a></li>
<li><a class="reference internal" href="#docker-s-detached-mode">Docker’s Detached Mode</a></li>
<li><a class="reference internal" href="#pre-compiled-php-binaries">Pre-compiled PHP binaries</a></li>
<li><a class="reference internal" href="#compiling-php-from-source">Compiling PHP from source</a></li>
<li><a class="reference internal" href="#manually-compiling-php-from-source">Manually compiling PHP from source</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="advanced_features.html"
                        title="next chapter">Advanced Features</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/basic_usage.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="advanced_features.html" title="Advanced Features"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Linux for PHP 8.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Foreach Code Factory.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>